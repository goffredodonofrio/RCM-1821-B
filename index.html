<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <title>RCM 1821-B — Plancia Principale</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="format-detection" content="telephone=no">

  <link rel="stylesheet" type="text/css" href="assets/classic.css">

  <!-- FONT ANTONIO LOCALI -->
  <style>
    @font-face {
      font-family: "Antonio";
      src: url("assets/Antonio-Regular.woff2") format("woff2"),
           url("assets/Antonio-Regular.woff") format("woff");
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: "Antonio";
      src: url("assets/Antonio-Bold.woff2") format("woff2"),
           url("assets/Antonio-Bold.woff") format("woff");
      font-weight: 700;
      font-style: normal;
      font-display: swap;
    }
    html, body, button, a, span, div, p, h1, h2, h3, h4, h5, h6 {
      font-family: "Antonio", system-ui, sans-serif !important;
    }
  </style>

  <!-- STILI: BALANCED PILLS + PANEL -->
  <style>
    :root{
      --pill-blue:#9fa3e3;
      --pill-yellow:#f6dc8a;
      --pill-gray:#cfcfcf;
      --pill-black:#000;
    }

    body{ background:black; }

    /* ===== OPS PANEL WRAPPER ===== */
    .ops-panel{
      background:black;
      border-radius:32px;
      padding:2.4rem 2.4rem 2rem;
      margin-top:1.2rem;
    }

    .section-title{
      margin-bottom:1.2rem;
      font-size:1.05rem;
      letter-spacing:.22em;
      color:var(--orange);
      text-transform:uppercase;
    }

    /* ===== BALANCED DATA PILLS ===== */
    .data-section{
      display:flex;
      flex-direction:column;
      gap:1rem;
    }
    .data-row{
      display:flex;
      align-items:center;
      gap:.7rem;
    }
    .data-main,
    .data-meta{
      display:flex;
      align-items:center;
      height:56px;
      border-radius:999px;
      font-weight:700;
      letter-spacing:.10em;
      text-transform:uppercase;
      white-space:nowrap;
      color:black;
    }
    .data-main{
      padding:0 1.25rem;
      font-size:1.25rem;
      background:var(--pill-blue);
      min-width:240px;
      justify-content:flex-start;
    }
    .data-meta{
      padding:0 1.25rem;
      font-size:.85rem;
      background:var(--pill-yellow);
      justify-content:flex-start;
      flex:1;
    }
    .pill-blue{ background:var(--pill-blue) !important; }
    .pill-yellow{ background:var(--pill-yellow) !important; }
    .pill-gray{ background:var(--pill-gray) !important; }

    .clock-main{
      font-size:2.7rem;
      letter-spacing:.18em;
    }

    /* ===== METEO: usa le stesse pill ===== */
    .weather-grid{
      display:flex;
      flex-direction:column;
      gap:1rem;
    }

    /* ===== CALENDARIO: pill stack ===== */
    .calendar-stack{
      display:flex;
      flex-direction:column;
      gap:.85rem;
    }

    /* questa è la “pill riga evento” che calendar.js può generare */
    .event-pill{
      display:flex;
      gap:.7rem;
      align-items:center;
    }
    .event-pill .event-time{
      min-width:110px;
      justify-content:center;
    }
    .event-pill .event-title{
      flex:1;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* ===== SMART GRID (domotica come prima) ===== */
    .smart-grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:1rem;
      margin-top:1.8rem;
      padding:0 .5rem;
    }
    .smart-grid a{
      display:flex;
      justify-content:flex-end;
      align-items:flex-end;
      height:80px;
      padding:0 1.5rem .6rem 1.5rem;
      border-radius:100vmax;
      text-decoration:none;
      font-weight:700;
      text-transform:uppercase;
      color:black;
      font-size:1.05rem;
      cursor:pointer;
      transition:transform .15s ease-out;
    }
    .smart-grid a:hover{ transform:scale(1.03); }

    .btn-orange-1{ background:#FFB469; }
    .btn-orange-2{ background:#F99A4B; }
    .btn-orange-3{ background:#F28C3A; }
    .btn-orange-4{ background:#E97C28; }
    .btn-orange-5{ background:#DE6F1B; }
    .btn-orange-6{ background:#C95F0F; }

    .btn-yellow-1{ background:#F4C242; }
    .btn-yellow-2{ background:#E8B32F; }
    .btn-yellow-3{ background:#DFA624; }
    .btn-yellow-4{ background:#D49718; }
    .btn-yellow-5{ background:#C6880F; }
    .btn-yellow-6{ background:#B27605; }

    .btn-red-1{ background:#E56A6A; }
    .btn-red-2{ background:#D95959; }
    .btn-red-3{ background:#CC5050; }
    .btn-red-4{ background:#B63F3F; }
    .btn-red-5{ background:#A33232; }
    .btn-red-6{ background:#8C2929; }

    @media (max-width:1100px){
      .smart-grid{ grid-template-columns:repeat(2,1fr); }
      .smart-grid a{ height:70px; font-size:.9rem; }
      .data-main{ min-width:200px; }
    }
  </style>
</head>

<body>

<section class="wrap-standard" id="column-3">

  <!-- ===== TOP HEADER (DATA CASCADE + NAV + BAR 1..5) ===== -->
  <div class="wrap">
    <div class="right-frame-top">

      <div class="data-cascade-button-group">
        <div class="data-cascade-wrapper" id="default">
          <div class="data-column">
            <div class="dc-row-1">LA</div><div class="dc-row-1">FELICITA'</div>
            <div class="dc-row-2">E'</div><div class="dc-row-3">SEMPLICE</div>
            <div class="dc-row-3">UN'</div><div class="dc-row-4">ORA</div>
            <div class="dc-row-5">AL</div><div class="dc-row-6">GIORNO</div>
            <div class="dc-row-7">BISOGNA</div>
          </div>
          <div class="data-column">
            <div class="dc-row-1">ESSERE</div><div class="dc-row-1">FELICI</div>
            <div class="dc-row-2">IL</div><div class="dc-row-3">31</div>
            <div class="dc-row-3">DI</div><div class="dc-row-4">AGOSTO</div>
            <div class="dc-row-5">C'E'</div><div class="dc-row-6">UN</div>
            <div class="dc-row-7">AMORE</div>
          </div>
          <div class="data-column">
            <div class="dc-row-1">CHE</div><div class="dc-row-1">NASCE</div>
            <div class="dc-row-2">E</div><div class="dc-row-3">UN'</div>
            <div class="dc-row-3">ESTATE</div><div class="dc-row-4">CHE</div>
            <div class="dc-row-5">MUORE</div><div class="dc-row-6">DESIGN</div>
            <div class="dc-row-7">THE</div>
          </div>
          <div class="data-column">
            <div class="dc-row-1">END</div><div class="dc-row-1">OF</div>
            <div class="dc-row-2">PATRIARCHY</div><div class="dc-row-3">TU</div>
            <div class="dc-row-3">SEI</div><div class="dc-row-4">TROPPO</div>
            <div class="dc-row-5">BIANCA</div><div class="dc-row-6">PER</div>
            <div class="dc-row-7">RESTARE</div>
          </div>
          <div class="data-column">
            <div class="dc-row-1">MANO</div><div class="dc-row-1">NELLA</div>
            <div class="dc-row-2">MANO</div><div class="dc-row-3">CON</div>
            <div class="dc-row-3">TE</div><div class="dc-row-4">STESSO</div>
            <div class="dc-row-5">EDOARDO</div><div class="dc-row-6">BIANCA</div>
            <div class="dc-row-7">CAROLINA</div>
          </div>
        </div>

        <nav>
          <button onclick="playSoundAndRedirect('audio2', '#')">ACCENDI</button>
          <button onclick="playSoundAndRedirect('audio2', '#')">SPEGNI</button>
          <button onclick="playSoundAndRedirect('audio2', '#')">APRI</button>
          <button onclick="playSoundAndRedirect('audio2', '#')">CHIUDI</button>
        </nav>
      </div>

      <div class="bar-panel first-bar-panel">
        <div class="bar-1"></div><div class="bar-2"></div>
        <div class="bar-3"></div><div class="bar-4"></div>
        <div class="bar-5"></div>
      </div>

    </div>
  </div>

  <!-- ===== BODY (LEFT FRAME + RIGHT FRAME) ===== -->
  <div class="wrap" id="gap">

    <div class="left-frame">
      <button onclick="topFunction(); playSoundAndRedirect('audio4', '#')" id="topBtn">
        <span class="hop">RCM</span> 1821 - B
      </button>

      <div>
        <div class="panel-3"><span class="hop">ORA E DATA</span></div>
        <div class="panel-4"><span class="hop"></span></div>
        <div class="panel-5"><span class="hop">-METEO</span></div>
        <div class="panel-6"><span class="hop"></span></div>
        <div class="panel-7"><span class="hop">SMART HOME</span></div>
        <div class="panel-8"><span class="hop"></span></div>
      </div>
    </div>

    <div class="right-frame">

      <div class="bar-panel">
        <div class="bar-6"></div><div class="bar-7"></div>
        <div class="bar-8"></div><div class="bar-9"></div>
        <div class="bar-10"></div>
      </div>

      <main>

        <!-- ===== CLOCK ===== -->
        <div class="ops-panel">
          <div class="section-title">TIME / STATUS</div>

          <div class="data-section">
            <div class="data-row">
              <div class="data-main clock-main" id="clock">--:--:--</div>
              <div class="data-meta pill-yellow">TIME SYNC</div>
            </div>

            <div class="data-row">
              <div class="data-main pill-gray" id="date">---</div>
              <div class="data-meta pill-blue">DATE CODE</div>
            </div>

            <div class="data-row">
              <div class="data-main pill-blue" id="stardate">---</div>
              <div class="data-meta pill-yellow">STARDATE</div>
            </div>

            <div class="data-row">
              <div class="data-main pill-yellow" id="dayPhase">---</div>
              <div class="data-meta pill-blue">SHIFT</div>
            </div>
          </div>
        </div>

        <!-- ===== METEO ===== -->
        <div class="ops-panel">
          <div class="section-title">ENVIRONMENT // TORINO</div>

          <div class="weather-grid">
            <div class="data-row">
              <div class="data-main" id="weather-temp">--°C</div>
              <div class="data-meta">TEMP</div>
            </div>

            <div class="data-row">
              <div class="data-main pill-gray" id="weather-rain">--%</div>
              <div class="data-meta pill-blue">RAIN</div>
            </div>

            <div class="data-row">
              <div class="data-main pill-blue" id="weather-humidity">--%</div>
              <div class="data-meta pill-yellow">HUMID</div>
            </div>

            <div class="data-row">
              <div class="data-main pill-gray" id="weather-wind">-- km/h</div>
              <div class="data-meta pill-blue">WIND</div>
            </div>
          </div>
        </div>

        <!-- ===== CALENDARIO ===== -->
        <div class="ops-panel">
          <div class="section-title">SCHEDULE</div>

          <div class="calendar-stack" id="events-row">
            <!-- calendar.js deve popolare qui -->
          </div>
        </div>

        <!-- ===== SMART HOME ===== -->
        <div class="ops-panel">
          <div class="section-title">SMART HOME</div>

          <div class="smart-grid">
            <a class="btn-orange-1" onclick="playBeep(); trigger('routine_1')">PROIETTORE ON</a>
            <a class="btn-orange-2" onclick="playBeep(); trigger('routine_4')">PROIETTORE OFF</a>
            <a class="btn-orange-3" onclick="playBeep(); trigger('routine_7')">ACCENDI LUCI LIVING ROOM</a>
            <a class="btn-orange-4" onclick="playBeep(); trigger('routine_10')">SPEGNI LUCI LIVING ROOM</a>
            <a class="btn-orange-5" onclick="playBeep(); trigger('routine_13')">APRI SERRANDE</a>
            <a class="btn-orange-6" onclick="playBeep(); trigger('routine_16')">CHIUDI SERRANDE</a>

            <a class="btn-yellow-1" onclick="playBeep(); trigger('routine_2')">APRI SERRANDA CUCINA</a>
            <a class="btn-yellow-2" onclick="playBeep(); trigger('routine_5')">CHIUDI SERRANDA CUCINA</a>
            <a class="btn-yellow-3" onclick="playBeep(); trigger('routine_8')">APRI SERRANDA STUDIO</a>
            <a class="btn-yellow-4" onclick="playBeep(); trigger('routine_11')">CHIUDI SERRANDA STUDIO</a>
            <a class="btn-yellow-5" onclick="playBeep(); trigger('routine_14')">APRI SERRANDA BAGNO</a>
            <a class="btn-yellow-6" onclick="playBeep(); trigger('routine_17')">CHIUDI SERRANDA BAGNO</a>

            <a class="btn-red-1" onclick="playBeep(); trigger('routine_3')">ROUTINE 3</a>
            <a class="btn-red-2" onclick="playBeep(); trigger('routine_6')">ROUTINE 6</a>
            <a class="btn-red-3" onclick="playBeep(); trigger('routine_9')">ROUTINE 9</a>
            <a class="btn-red-4" onclick="playBeep(); trigger('routine_12')">ROUTINE 12</a>
            <a class="btn-red-5" onclick="playBeep(); trigger('routine_15')">ROUTINE 15</a>
            <a class="btn-red-6" onclick="playBeep(); trigger('routine_18')">ROUTINE 18</a>
          </div>
        </div>

      </main>
    </div>
  </div>
</section>

<!-- SCRIPT LCARS -->
<script src="assets/lcars.js"></script>
<!-- SCRIPT METEO -->
<script src="assets/meteo.js"></script>
<!-- SCRIPT CALENDARIO -->
<script src="assets/calendar.js"></script>

<!-- OROLOGIO + STARDATE + DAY PHASE -->
<script>
function updateClock() {
  const now = new Date();

  document.getElementById("clock").textContent = now.toLocaleTimeString("it-IT", {
    hour: "2-digit", minute: "2-digit", second: "2-digit"
  });

  document.getElementById("date").textContent = now.toLocaleDateString("it-IT", {
    weekday: "short", day: "2-digit", month: "short", year: "numeric"
  });

  const sd = (now.getTime() / 1000 / 60 / 60 / 24 - 735000) * 5;
  document.getElementById("stardate").textContent = sd.toFixed(1);

  const h = now.getHours();
  let phase = "ALPHA SHIFT // STANDBY";
  if (h >= 6 && h < 12) phase = "ALPHA SHIFT // MORNING OPS";
  else if (h >= 12 && h < 18) phase = "BETA SHIFT // DAY OPS";
  else if (h >= 18 && h < 23) phase = "GAMMA SHIFT // EVENING";
  else phase = "NIGHT WATCH // SILENT RUN";

  document.getElementById("dayPhase").textContent = phase;
}
setInterval(updateClock, 1000);
updateClock();
</script>

<!-- VOICE MONKEY: TRIGGER -->
<script>
const MONKEY_MAP = {
  routine_1:  "accendi-proiettore-m",
  routine_4:  "spegni-proiettore-m",
  routine_7:  "accendi-luci-living-room-m",
  routine_10: "spegni-luci-living-room-m",
  routine_13: "apri-serrande-m",
  routine_16: "chiudi-serrande-m",
  routine_2:  "apri-serranda-cucina-m",
  routine_5:  "chiudi-serranda-cucina-m",
  routine_8:  "apri-serranda-studio-m",
  routine_11: "chiudi-serranda-studio-m",
  routine_14: "apri-serranda-bagno-m",
  routine_17: "chiudi-serranda-bagno-m"
};

const VM_ACCESS_TOKEN = "102bb4c064858a0ff8bd4039ae948b74";
const VM_SECRET_TOKEN = "f0276dc81f732a45d7c4cfbe289837c7";

async function trigger(action){
  const monkey = MONKEY_MAP[action];
  if(!monkey) return;

  const payload = { access_token: VM_ACCESS_TOKEN, secret_token: VM_SECRET_TOKEN, monkey };

  try{
    await fetch("https://api.voicemonkey.io/trigger",{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify(payload)
    });
  }catch(e){
    console.warn("VoiceMonkey error:", e);
  }
}
</script>

<!-- BEEP -->
<script>
function playBeep(){
  const audio = new Audio("assets/beep4.mp3");
  audio.volume = 0.35;
  audio.play().catch(()=>{});
}
</script>

</body>
</html>
